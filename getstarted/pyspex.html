
<!DOCTYPE html>

<html>
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />

    <title>1.4. Install the SPEX Python interface &#8212; SPEX Help Center 3.07.03 documentation</title>
    <link rel="stylesheet" type="text/css" href="../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../_static/alabaster.css" />
    <script data-url_root="../" id="documentation_options" src="../_static/documentation_options.js"></script>
    <script src="../_static/jquery.js"></script>
    <script src="../_static/underscore.js"></script>
    <script src="../_static/doctools.js"></script>
    <link rel="canonical" href="https://spex-xray.github.io/spex-help/getstarted/pyspex.html" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="1.6. Compile SPEX from source" href="compile.html" />
    <link rel="prev" title="1.3. How to convert spectra to SPEX format" href="runtrafo.html" />
   
  <link rel="stylesheet" href="../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="install-the-spex-python-interface">
<span id="sec-installpyspex"></span><h1><span class="section-number">1.4. </span>Install the SPEX Python interface<a class="headerlink" href="#install-the-spex-python-interface" title="Permalink to this headline">¶</a></h1>
<p>The SPEX python interface depends on a quite specific python environment. Using <a class="reference external" href="https://docs.conda.io/en/latest/miniconda.html">conda</a>, you can create this environment pretty
quickly. Please make sure you have (mini)conda installed and initialized on your machine before you continue.</p>
<section id="binary-installation">
<h2><span class="section-number">1.4.1. </span>Binary installation<a class="headerlink" href="#binary-installation" title="Permalink to this headline">¶</a></h2>
<p>The easiest option to install the Python interface for SPEX is by downloading the SPEX binary
version for your platform. See and follow the instruction in <a class="reference internal" href="install.html#sec-install"><span class="std std-ref">How to install SPEX</span></a>.</p>
<p>Once the standard SPEX environment is set up using the <code class="docutils literal notranslate"><span class="pre">spexdist.sh</span></code> or <code class="docutils literal notranslate"><span class="pre">spexdist.csh</span></code> files,
it is time to build the conda environment. This can be done using the <code class="docutils literal notranslate"><span class="pre">spex.yml</span></code> file provided in the SPEX directory.
Please enter the following command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(base) unix:~/SPEX&gt; conda env create -f $SPEX90/python/spex.yml
</pre></div>
</div>
<p>This creates the <code class="docutils literal notranslate"><span class="pre">spex</span></code> conda environment for you. This step should only be done once.</p>
<p>From SPEX version 3.07.00, we also provide a conda environment for Python 3.9 for cases when you need a
more recent python version. This Python 3.9 environment can be installed using the file <code class="docutils literal notranslate"><span class="pre">$SPEX90/python/spex39.yml</span></code>.
The conda environment will be called <code class="docutils literal notranslate"><span class="pre">spex39</span></code>.</p>
<div class="admonition note">
<p class="admonition-title">Note</p>
<p>If you installed SPEX through the Mac package installer, then <code class="docutils literal notranslate"><span class="pre">spex.yml</span></code> is not located in a writeable
directory. Please copy <code class="docutils literal notranslate"><span class="pre">spex.yml</span></code> first to your home directory (<code class="docutils literal notranslate"><span class="pre">cp</span> <span class="pre">/opt/spex/python/spex.yml</span> <span class="pre">~/</span></code>) and then
create the conda environment like: <code class="docutils literal notranslate"><span class="pre">conda</span> <span class="pre">env</span> <span class="pre">create</span> <span class="pre">-f</span> <span class="pre">~/spex.yml</span></code>.</p>
</div>
<p>If successful, you can from now on activate the environment with the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(base) unix:~/SPEX&gt; conda activate spex
</pre></div>
</div>
<p>And from now on, you can use the python interface in SPEX:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(spex) unix:~/SPEX&gt; python
Python 3.5.6 |Anaconda, Inc.| (default, Aug 26 2018, 21:41:56)
[GCC 7.3.0] on linux
Type &quot;help&quot;, &quot;copyright&quot;, &quot;credits&quot; or &quot;license&quot; for more information.
&gt;&gt;&gt; from pyspex.spex import Session
&gt;&gt;&gt; s=Session()
 Welcome user to SPEX version 3.07.02

 NEW in this version of SPEX:
05-09-2022 Fixed m2 to cm2 conversion factor in plot area
06-09-2022 Fixed issue with dividing response matrix in trafo
19-10-2022 Fixed issue with error output table format
07-11-2022 Plot adum now outputs full range of double precision numbers
10-11-2022 Fixed issue with quotes not appearing in log save output
21-11-2022 Fixed issue with line broadening in the cluster model

 Currently using SPEXACT version 2.07.00. Type `help var calc` for details.
&gt;&gt;&gt;
</pre></div>
</div>
<p>If you need other python packages for your project, you can install them through conda in
your new <code class="docutils literal notranslate"><span class="pre">spex</span></code> environment.</p>
</section>
<section id="compile-python-interface-for-spex">
<h2><span class="section-number">1.4.2. </span>Compile Python interface for SPEX<a class="headerlink" href="#compile-python-interface-for-spex" title="Permalink to this headline">¶</a></h2>
<p>If you do not want to use conda, you can also compile the Python interfaces for SPEX. This can be done
either through a compile script called <code class="docutils literal notranslate"><span class="pre">compile.py</span></code> or manually with CMake by adding the option <code class="docutils literal notranslate"><span class="pre">-DPYTHON=2</span></code> or
<code class="docutils literal notranslate"><span class="pre">-DPYTHON=3</span></code> depending on the python version. The use of Python 3 is strongly recommended. See <a class="reference internal" href="compile.html#sec-compile"><span class="std std-ref">Compile SPEX from source</span></a>
for details.</p>
</section>
<section id="integration-into-ipython-and-jupyter-notebook">
<h2><span class="section-number">1.4.3. </span>Integration into iPython and Jupyter Notebook<a class="headerlink" href="#integration-into-ipython-and-jupyter-notebook" title="Permalink to this headline">¶</a></h2>
<p>Next to the dependencies installed in the conda environment <code class="docutils literal notranslate"><span class="pre">spex</span></code>, the Python interface also depends on the SPEX
environment variables set with the spexdist.(c)sh files. So before running iPython or Jupyter notebook, it is
necessary to source the SPEX environment (also make sure the conda <code class="docutils literal notranslate"><span class="pre">spex</span></code> environment is activated):</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(spex) unix:~&gt; source /opt/spex/spexdist.sh
</pre></div>
</div>
<p>(replace /opt/spex in this path with the location of SPEX on your machine, or $SPEX90 if this variable is already set).</p>
<p>It may be that iPython and Jupyter are not yet installed in your conda environment. If not, please install them using
the command:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(spex) unix:~&gt; conda install jupyter_client ipykernel
</pre></div>
</div>
<p>With iPython and Jupyter notebook, it can be helpful to install the spex conda environment explicitly for your project:</p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>(spex) unix:~&gt; ipython kernel install --user --name=spex
</pre></div>
</div>
<p>In your Jupyter notebook, you can now select <code class="docutils literal notranslate"><span class="pre">spex</span></code> from the drop-down menu if you are creating a new project. The
<code class="docutils literal notranslate"><span class="pre">spex</span></code> conda environment should now be linked to your Jupyter project.</p>
</section>
</section>
<section id="dependencies">
<h1><span class="section-number">1.5. </span>Dependencies<a class="headerlink" href="#dependencies" title="Permalink to this headline">¶</a></h1>
<p>PYSPEX depends on the <code class="docutils literal notranslate"><span class="pre">numpy</span></code>, <code class="docutils literal notranslate"><span class="pre">astropy</span></code>, <code class="docutils literal notranslate"><span class="pre">future</span></code> and <code class="docutils literal notranslate"><span class="pre">matplotlib</span></code> python modules. The current
numpy versions should include the f2py program that is necessary to create the Fortran to python
interface.</p>
<p>Please take care that both modules are often distributed in a python 2 and python 3 version.
If you compile SPEX for python 3, then also the python3 versions of the modules need to be
installed. In Linux distributions, packages often have the python version in the name. In
Debian, for example, the python 2 version of <code class="docutils literal notranslate"><span class="pre">numpy</span></code> is called <code class="docutils literal notranslate"><span class="pre">python-numpy</span></code> and the python 3
version <code class="docutils literal notranslate"><span class="pre">python3-numpy</span></code>.</p>
<p>Since Python 2 is no longer maintained, we do not actively support the Python 2 application of
PYSPEX anymore.</p>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../index.html">
    <img class="logo" src="../_static/logo-wide.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1 current"><a class="reference internal" href="../getstarted.html">1. Getting started</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="install.html">1.1. How to install SPEX</a></li>
<li class="toctree-l2"><a class="reference internal" href="runspex.html">1.2. How to run SPEX</a></li>
<li class="toctree-l2"><a class="reference internal" href="runtrafo.html">1.3. How to convert spectra to SPEX format</a></li>
<li class="toctree-l2 current"><a class="current reference internal" href="#">1.4. Install the SPEX Python interface</a></li>
<li class="toctree-l2"><a class="reference internal" href="#dependencies">1.5. Dependencies</a></li>
<li class="toctree-l2"><a class="reference internal" href="compile.html">1.6. Compile SPEX from source</a></li>
<li class="toctree-l2"><a class="reference internal" href="docker.html">1.7. Use SPEX through Docker</a></li>
<li class="toctree-l2"><a class="reference internal" href="conda.html">1.8. How to install SPEX using Anaconda</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../threads.html">2. Analysis threads</a></li>
<li class="toctree-l1"><a class="reference internal" href="../reference.html">3. Command overview</a></li>
<li class="toctree-l1"><a class="reference internal" href="../models.html">4. Spectral models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../tools.html">5. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../pyspex.html">6. Python Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../help.html">7. Help &amp; troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../theory.html">8. SPEX Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../exercises.html">9. Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../changelog.html">10. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../credits.html">11. Credits</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../index.html">Documentation overview</a><ul>
  <li><a href="../getstarted.html"><span class="section-number">1. </span>Getting started</a><ul>
      <li>Previous: <a href="runtrafo.html" title="previous chapter"><span class="section-number">1.3. </span>How to convert spectra to SPEX format</a></li>
      <li>Next: <a href="compile.html" title="next chapter"><span class="section-number">1.6. </span>Compile SPEX from source</a></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>$('#searchbox').show(0);</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
        Last updated on: Mar 28, 2023.<br>
    
        &copy;2023, Jelle de Plaa, Jelle Kaastra, Liyi Gu, SPEX Development Team, <a href="https://www.sron.nl/">SRON Netherlands Institute for Space Research</a>.
    

</div>

  </body>
</html>

<!DOCTYPE html>

<html lang="en">
  <head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" /><meta name="generator" content="Docutils 0.18.1: http://docutils.sourceforge.net/" />

    <title>3.1.26. Rbin: optimal rebinning of the data and response, including saving &#8212; SPEX Help Center 3.08.01 documentation</title>
    <link rel="stylesheet" type="text/css" href="../../_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="../../_static/alabaster.css" />
    <script data-url_root="../../" id="documentation_options" src="../../_static/documentation_options.js"></script>
    <script src="../../_static/jquery.js"></script>
    <script src="../../_static/underscore.js"></script>
    <script src="../../_static/_sphinx_javascript_frameworks_compat.js"></script>
    <script src="../../_static/doctools.js"></script>
    <link rel="canonical" href="https://spex-xray.github.io/spex-help/reference/commands/rbin.html" />
    <link rel="index" title="Index" href="../../genindex.html" />
    <link rel="search" title="Search" href="../../search.html" />
    <link rel="next" title="3.1.27. Sector: creating, copying and deleting of a sector" href="sector.html" />
    <link rel="prev" title="3.1.25. Quit: finish the program" href="quit.html" />
   
  <link rel="stylesheet" href="../../_static/custom.css" type="text/css" />
  
  
  <meta name="viewport" content="width=device-width, initial-scale=0.9, maximum-scale=0.9" />

  </head><body>
  

    <div class="document">
      <div class="documentwrapper">
        <div class="bodywrapper">
          

          <div class="body" role="main">
            
  <section id="rbin-optimal-rebinning-of-the-data-and-response-including-saving">
<span id="sec-rbin"></span><h1><span class="section-number">3.1.26. </span>Rbin: optimal rebinning of the data and response, including saving<a class="headerlink" href="#rbin-optimal-rebinning-of-the-data-and-response-including-saving" title="Permalink to this heading">¶</a></h1>
<section id="overview">
<h2><span class="section-number">3.1.26.1. </span>Overview<a class="headerlink" href="#overview" title="Permalink to this heading">¶</a></h2>
<p>This command rebins (a part of) the data (thus both the spectrum and the
response) to the optimal bin size given the statistics of the source as
well as the instrumental resolution. This is recommended to do in
<strong>all</strong> cases, in order to avoid oversampling of the data. The theory
and algorithms used for this rebinning are described in detail in
<a class="reference internal" href="../../theory/response.html#sect-matrices"><span class="std std-ref">Optimal definition of respons matrices</span></a>.</p>
<p>It does essentially the same as the obin command as far as binning of the
data channels is concerned, but in addition it also optimally bins the
model energy grid. All prescriptions for this are given in the paper of
Kaastra and Bleeker (2016). In addition, it stores the newly binned
spectrum and response, with a different name, in the same directory where
the original data are. If the original data rea named data.spo and data.res,
the new names will be databin0.spo and databin0.res.</p>
<p>It is highly recommended to apply the binning to the full data set, and to do
one instrument at a time, to reduce the use of memory, especially in cases with
very large matrices. In those cases, the compression may take several minutes.</p>
<p>Further, it is best practice to quit spex after the creation of the reduced
dataset, and to load the reduced data in a new session. If you want to see the difference,
you can load the original and the binned data as two separate instruments in spex,
apply a simple model and see the differences in a plot.</p>
</section>
<section id="syntax">
<h2><span class="section-number">3.1.26.2. </span>Syntax<a class="headerlink" href="#syntax" title="Permalink to this heading">¶</a></h2>
<p>The following syntax rules apply:</p>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rbin</span> <span class="pre">#i1:</span></code> : Simplest command allowed. #i1: is the range in data
channels over which the binning needs to take place.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rbin</span> <span class="pre">#r1:</span> <span class="pre">#i:</span> <span class="pre">unit</span> <span class="pre">#a</span></code> : The same command as above, except that now
the ranges over which the data is to be binned (#r1:) are specified in
units (#a) different from data channels. These units can be eV, keV,
Å, as well as in units of Rydberg (ryd), Joules (j), Hertz (hz) and
nanometers (nm).</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rbin</span> <span class="pre">[instrument</span> <span class="pre">#i1:]</span> <span class="pre">[region</span> <span class="pre">#i2:]</span> <span class="pre">#i3:</span></code> : Here #i3: is the same
as #i1: in the first command. However, here one can specify the
instrument range #i1: and the region range #i2: as well, so that the
binning is done only for one given data set.</div>
<div class="line"><code class="docutils literal notranslate"><span class="pre">rbin</span> <span class="pre">[instrument</span> <span class="pre">#i1:]</span> <span class="pre">[region</span> <span class="pre">#i2:]</span> <span class="pre">#r1:</span> <span class="pre">[unit</span> <span class="pre">#a]</span></code> : This command
is the same as the above, except that here one can specify the range
over which the binning should occur in the units specified by #a.
These units can be eV, Å, keV, as well as in units of Rydberg (ryd),
Joules (j), Hertz (hz) and nanometers (nm).</div>
</div>
</section>
<section id="examples">
<h2><span class="section-number">3.1.26.3. </span>Examples<a class="headerlink" href="#examples" title="Permalink to this heading">¶</a></h2>
<div class="line-block">
<div class="line"><code class="docutils literal notranslate"><span class="pre">rbin</span> <span class="pre">1:10000</span></code> : Optimally bins the data channels 1:10000.</div>
</div>
</section>
</section>


          </div>
          
        </div>
      </div>
      <div class="sphinxsidebar" role="navigation" aria-label="main navigation">
        <div class="sphinxsidebarwrapper">
<p class="logo">
  <a href="../../index.html">
    <img class="logo" src="../../_static/logo-wide.png" alt="Logo"/>
    
  </a>
</p>








<h3>Navigation</h3>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../../getstarted.html">1. Getting started</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../threads.html">2. Analysis threads</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="../../reference.html">3. Command overview</a><ul class="current">
<li class="toctree-l2 current"><a class="reference internal" href="../commands.html">3.1. Command syntax</a></li>
<li class="toctree-l2"><a class="reference internal" href="../plot.html">3.2. Plotting reference</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../../models.html">4. Spectral models</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../tools.html">5. Additional tools</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../pyspex.html">6. Python Interface</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../help.html">7. Help &amp; troubleshooting</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../theory.html">8. SPEX Theory</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../exercises.html">9. Exercises</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../changelog.html">10. Changelog</a></li>
<li class="toctree-l1"><a class="reference internal" href="../../credits.html">11. Credits</a></li>
</ul>

<div class="relations">
<h3>Related Topics</h3>
<ul>
  <li><a href="../../index.html">Documentation overview</a><ul>
  <li><a href="../../reference.html"><span class="section-number">3. </span>Command overview</a><ul>
  <li><a href="../commands.html"><span class="section-number">3.1. </span>Command syntax</a><ul>
      <li>Previous: <a href="quit.html" title="previous chapter"><span class="section-number">3.1.25. </span>Quit: finish the program</a></li>
      <li>Next: <a href="sector.html" title="next chapter"><span class="section-number">3.1.27. </span>Sector: creating, copying and deleting of a sector</a></li>
  </ul></li>
  </ul></li>
  </ul></li>
</ul>
</div>
<div id="searchbox" style="display: none" role="search">
  <h3 id="searchlabel">Quick search</h3>
    <div class="searchformwrapper">
    <form class="search" action="../../search.html" method="get">
      <input type="text" name="q" aria-labelledby="searchlabel" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false"/>
      <input type="submit" value="Go" />
    </form>
    </div>
</div>
<script>document.getElementById('searchbox').style.display = "block"</script>








        </div>
      </div>
      <div class="clearer"></div>
    </div>
<div class="footer">
        Last updated on: Jul 18, 2024.<br>
    
        &copy;2024, Jelle de Plaa, Jelle Kaastra, Liyi Gu, SPEX Development Team, <a href="https://www.sron.nl/">SRON Netherlands Institute for Space Research</a>.
    

</div>

  </body>
</html>